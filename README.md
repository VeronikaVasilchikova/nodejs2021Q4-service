# RS School REST service

## Prerequisites

- Git - [Download & Install Git](https://git-scm.com/downloads).
- Node.js (v16+) - [Download & Install Node.js](https://nodejs.org/en/download/) and the npm package manager.

## Downloading

```
git clone {repository URL}
```

```
git checkout NESTJS
```

```
cd nodejs2021Q4-service
```

## To run application using Docker container run in your terminal
```
docker-compose up -d
```
# To see how containers are running
Open Docker Desktop and select 'Containers/Apps'
# To stop and to remove Docker containers run in your terminal
```
docker-compose down
```
# To check image's size run in your terminal
```
docker image ls
```
# To remove image run in your terminal
```
docker rmi {image ID}
```

## Running application without container
```
npm install
```
```
npm run start:dev
```

After starting the app on port (4000 as default) you can open
in your browser OpenAPI documentation by typing http://localhost:4000/doc.
For more information about OpenAPI/Swagger please visit https://swagger.io/.

## Testing

After application running open new terminal and enter:

To run all tests with authorization
```
npm test:auth
```

### Auto-fix and format
```
npm run lint
```

### Performance comparison
```
npm run compare:performance
```
## NestJs Express performance results
--------------------------------
Summary report @ 00:58:58(+0300)
--------------------------------

errors.ETIMEDOUT: .............................................................. 250
http.codes.200: ................................................................ 343
http.codes.201: ................................................................ 7
http.codes.204: ................................................................ 3
http.codes.404: ................................................................ 12
http.codes.500: ................................................................ 129
http.request_rate: ............................................................. 28/sec
http.requests: ................................................................. 744
http.response_time:
  min: ......................................................................... 8
  max: ......................................................................... 9998
  median: ...................................................................... 5168
  p95: ......................................................................... 9801.2
  p99: ......................................................................... 9999.2
http.responses: ................................................................ 494
vusers.completed: .............................................................. 7
vusers.created: ................................................................ 386
vusers.created_by_name.Users: .................................................. 386
vusers.failed: ................................................................. 379
vusers.session_length:
  min: ......................................................................... 518
  max: ......................................................................... 25482.1
  median: ...................................................................... 1224.4
  p95: ......................................................................... 13497.6
  p99: ......................................................................... 13497.6

## NestJs Fastify performance results
--------------------------------
Summary report @ 01:01:42(+0300)
--------------------------------

errors.ETIMEDOUT: .............................................................. 61
http.codes.200: ................................................................ 239
http.codes.201: ................................................................ 9
http.codes.204: ................................................................ 3
http.codes.404: ................................................................ 16
http.codes.500: ................................................................ 146
http.request_rate: ............................................................. 28/sec
http.requests: ................................................................. 656
http.response_time:
  min: ......................................................................... 8
  max: ......................................................................... 9902
  median: ...................................................................... 4583.6
  p95: ......................................................................... 9230.4
  p99: ......................................................................... 9801.2
http.responses: ................................................................ 413
vusers.completed: .............................................................. 8
vusers.created: ................................................................ 397
vusers.created_by_name.Users: .................................................. 397
vusers.failed: ................................................................. 207
vusers.session_length:
  min: ......................................................................... 526.3
  max: ......................................................................... 26206.3
  median: ...................................................................... 871.5
  p95: ......................................................................... 5272.4
  p99: ......................................................................... 5272.4
